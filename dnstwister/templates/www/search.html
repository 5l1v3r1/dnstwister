{% extends "www/layout.html" %}
{% block title %}Report for {{ domain | domain_renderer }}{% endblock %}
{% block head %}
        <script type="text/javascript" src="{{ url_for('static', filename='search.min.js') }}"></script>
        <script type="text/javascript">
          document.onreadystatechange = function () {
            if (document.readyState === 'interactive') {
              search.run('{{ domain }}')
            }
          }
          window.onresize = function () {
            ui.placeFooter()
          }
        </script>
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='search.min.css') }}">
{% endblock %}
{% block header %}
        <h1>dnstwister report</h1>
        <form action="/search" method="post" class="re-search" autocomplete="off">
            <div class="row">
                <div class="six columns">
                    <input type="text" autocapitalize="none" name="domains" value="{{ domain }}" size="49" class="u-full-width" />
                    <div class="subscribe_wrapper">
                        <a alt="email alert subscribe link" title="Subscribe for email alerts" href="/email/subscribe/{{ domain | domain_encoder }}">
                            Subscribe for email alerts
                        </a>
                    </div>
                </div>
                <div class="six columns buttons">
                    <input type="submit" value="&#128270;" class="button-primary" alt="search" />
                </div>
            </div>
        </form>
{% endblock %}
{% block body %}
        <section class="progress">
            <h4 class="search_progress">
                Searching<span id="search_dots">.</span>
            </h4>
            <h6 class="search_result">
                <div>
                    We<span class="wip_text">'ve</span> identified
                    <span id="identified_count" class="result_highlight counter">0</span>
                    domains similar to
                    <span class="result_highlight">{{ domain | domain_renderer }}</span>.
                    <br />
                    <span class="wip_text">
                        We've checked
                        <span id="checked_count" class="result_highlight counter">0</span>
                        of those domains.
                        <br />
                    </span>
                    <span id="resolved_count" class="result_highlight counter">No</span>
                    domains
                    <span class="wip_text">have</span>
                    resolved to an IP address.
                </div>
            </h6>
        </section>
        <section>
            <section class="exports">
                export:
                {% for (title, format) in exports.items() %}
                    <a href="/search/{{ domain | domain_encoder }}/{{ format }}">{{ title }}</a>
                {% endfor %}
            </section>
        </section>
        <section>
            <div class="report-tabs">
                <div class="tab">
                    <input type="radio" name="tabs-report" id="tab-1" class="tab-switch" autocomplete="off" checked />
                    <label for="tab-1" class="tab-label" onclick="ui.placeFooter()">Resolved</label>
                    <div class="tab-content">
                        <table class="report u-full-width" id="main_report">
                            <thead>
                                <tr>
                                    <th>Domain</th>
                                    <th colspan="2">IP Address / A record</th>
                                </tr>
                            </thead>
                            <tbody id="resolved_report_target">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="tab">
                    <input type="radio" name="tabs-report" id="tab-2" class="tab-switch" autocomplete="off" />
                    <label for="tab-2" class="tab-label" onclick="ui.placeFooter()">Available</label>
                    <div class="tab-content">
                        <table class="report u-full-width" id="unresolved_report">
                            <thead>
                                <tr>
                                    <th>Domains</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="unresolved_report_target">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="tab" id="errors_tab">
                    <input type="radio" name="tabs-report" id="tab-3" class="tab-switch" autocomplete="off" />
                    <label for="tab-3" class="tab-label" onclick="ui.placeFooter()">Errors</label>
                    <div class="tab-content">
                        <table class="report u-full-width" id="errored_report">
                            <thead>
                                <tr>
                                    <th>Domain</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="errored_report_target">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
{% endblock %}
